---
title: "OSI 七層模型"
date: 2025-05-31T00:01:17+08:00
draft: false
description: ""
type: "post"
tags: ["network"]
categories : ["network"]
---

OSI（Open Systems Interconnection）七層模型是一個將網路通訊劃分為七個層級的標準架構，有助於理解與設計網路系統。

---

## OSI 七層總覽

| 層級 | 名稱（中） | 名稱（英）       | 功能簡介                          |
|------|------------|------------------|-----------------------------------|
| 7    | 應用層     | Application      | 提供應用程式之間的網路服務        |
| 6    | 表示層     | Presentation     | 負責資料的格式轉換與加解密        |
| 5    | 會議層     | Session          | 管理應用程式間的連線與會話        |
| 4    | 傳輸層     | Transport        | 提供可靠資料傳輸（如 TCP）        |
| 3    | 網路層     | Network          | 負責路由選擇與 IP 封包傳送        |
| 2    | 資料鏈結層 | Data Link        | 負責資料幀的傳輸與錯誤檢測        |
| 1    | 實體層     | Physical         | 負責實體媒介的電氣訊號傳輸        |

---

## 各層詳細介紹

### 第七層：應用層（Application Layer）

應用層是提供網路應用服務的協定層級，定義了應用程式之間如何通訊的標準規則。

#### 常見協定與用途

| 協定   | 全名              | 用途                        |
|--------|-------------------|-----------------------------|
| HTTP   | HyperText Transfer Protocol | 網頁傳輸（無狀態）     |
| HTTPS  | HTTP Secure       | 加密的 HTTP，使用 TLS/SSL  |
| FTP    | File Transfer Protocol | 傳輸檔案（支援登入、清單等） |
| SMTP   | Simple Mail Transfer Protocol | 傳送電子郵件     |
| DNS    | Domain Name System | 將網域名稱解析為 IP 位址    |
| DHCP   | Dynamic Host Configuration Protocol | 動態分配 IP 位址      |

---

### 第六層：表示層（Presentation Layer）

表示層主要負責「資料的表示方式」與「資料轉換處理」，確保傳送端與接收端能正確理解彼此的資料格式。

#### 功能與角色

- **格式轉換（Translation）**  
  將一種資料格式轉成另一種，例如從應用程式內部使用的資料結構，轉換成適合網路傳送的格式。
  
- **資料加密 / 解密（Encryption / Decryption）**  
  負責在傳輸前加密資料，與在接收端解密，保障資訊安全。

- **壓縮 / 解壓縮（Compression / Decompression）**  
  減少資料大小以提升傳輸效率。

### 常見表示層技術
OSI 模型比較理論性，實務上常常是應用層協定「自己處理表示層的事」

| 名稱 / 技術     | 功能類型           | 是否屬於表示層？ | 說明 |
|------------------|--------------------|------------------|------|
| **TLS / SSL**    | 加密、解密         | ✅               | 在 HTTPS 中加密資料，確保資料保密與完整性 |
| **ASCII / Unicode** | 編碼格式轉換    | ✅               | 將字元轉為二進位資料或從中解碼（例如 UTF-8） |
| **JPEG / PNG / MP3 / MP4** | 壓縮與格式轉換 | ✅           | 傳送圖片、音訊、影片時使用的編碼格式 |
| **JSON / XML / YAML** | 資料格式化      | ✅               | 結構化資料表示，方便在不同平台與語言中交換 |
| **Base64**       | 資料編碼           | ✅               | 常用於把 binary 轉成純文字（例如嵌入圖片、JWT） |

---

### 第五層：會議層（Session Layer）

會議層主要負責**建立、管理、與終止應用程式之間的連線會話（session）**。

#### 功能與角色

- **建立會話（Session Establishment）**  
  協調雙方應用程式建立一個通訊會話，雙方同意開始一段資料交換。

- **管理會話（Session Management）**  
  控制會話中誰可以傳輸、何時傳輸，追蹤會話狀態。

- **同步控制（Synchronization）**  
  在資料傳輸過程中設定「檢查點（checkpoint）」，使得中斷後可以從斷點繼續（如影像會議）。

- **終止會話（Session Termination）**  
  結束會話連線並釋放資源。

---

### 第四層：傳輸層（Transport Layer）


傳輸層負責**在端點（主機）之間可靠或不可靠地傳送資料**，提供應用程式間的資料傳輸服務。

### 傳輸層傳送的單位：Segment（段）

- 傳輸層收到來自應用層的資料後，會將資料分成一段段的小資料塊，這些稱為 **Segment（段）**。
- 每個 Segment 會加上傳輸層的標頭（Header），包含端口號、序號、確認號等控制資訊。


#### 傳輸層的主要功能
- **資料分段與重組**  
  將應用層傳來的大資料分成小段，傳送後在接收端重新組合
- **端口管理（Port Management）**  
  使用端口號區分不同應用程式的資料流，確保資料送到正確的應用程式
- **可靠傳輸**  
  確保資料完整無誤到達對方（例如 TCP）
- **流量控制（Flow Control）**  
  控制傳輸速度，避免接收端處理不及造成資料丟失。
- **錯誤檢測與重傳**  
  檢查資料錯誤，出錯時要求重傳
- **多工服務（Multiplexing）**  
  支援多個應用同時使用網路

| 協定       | 特點                         | 傳輸層功能                   | 使用場合                      |
|------------|------------------------------|------------------------------|-------------------------------|
| **TCP**    | 可靠連接導向（Connection-oriented）| 資料可靠傳送、順序控制、流量控制、錯誤重傳 | 網頁瀏覽（HTTP/HTTPS）、郵件、檔案傳輸 |
| **UDP**    | 不可靠無連接（Connectionless） | 不保證資料到達、不順序、不重傳，延遲小 | 視訊串流、線上遊戲、DNS查詢     |

---

### 第三層：網路層（Network Layer）
網路層負責**在不同網路之間尋找路徑並轉送資料包（Packet）**，實現跨網路的資料傳輸與路由選擇。

#### 網路層的主要功能
- **路由（Routing）**  
  - 決定資料包從來源到目的地的最佳路徑。
- **邏輯位址編址（Logical Addressing）**  
  - 使用 IP 位址為每台主機或裝置編址，區別不同的網路節點。
- **封包轉送（Packet Forwarding）**  
  - 根據路由決策，將資料包從一個網路節點傳到另一個節點。
- **封包分段與重組（Fragmentation & Reassembly）**  
  - 將大封包切割成適合底層網路 MTU（Maximum Transmission Unit）的小封包，並在目的地重新組合。
    - 不同網路可能有不同的 MTU 限制，這是為了確保資料能夠順利傳輸。
- **錯誤處理與診斷**  
  - 例如 ICMP（Internet Control Message Protocol）協議用於回報錯誤訊息與診斷網路狀況。


#### 重要協議

| 協議             | 功能說明                         | 常見用途                        |
|------------------|--------------------------------|--------------------------------|
| **IPv4**         | 傳統的 32-bit 位址協定            | 網際網路主流位址協定             |
| **IPv6**         | 新一代 128-bit 位址協定           | 解決 IPv4 位址耗盡問題           |
| **ICMP**         | 訊息控制協定，錯誤回報和診斷     | ping、traceroute 工具使用       |

---

### 第二層：資料鏈結層（Data Link Layer）
資料鏈路層負責在**相鄰節點之間**可靠地傳送訊框（Frame），確保錯誤偵測與修正，並控制媒介存取。
#### 資料鏈路層的主要功能
- **封裝與解封裝**  
  將網路層傳來的封包（Packet）封裝成資料框架（Frame），並在接收端解封裝還原。
- **錯誤偵測與修正**  
  利用 CRC（Cyclic Redundancy Check）、校驗和（Checksum）等方法檢測資料錯誤，部分協議支援錯誤修正。
- **媒介存取控制位址（MAC Address）**  
  管理同一物理媒介上多個設備的存取權，避免資料碰撞。
- **流量控制**  
  控制資料傳送速度，避免接收方來不及處理。

| 協議/技術           | 功能說明                           | 備註                           |
|--------------------|----------------------------------|------------------------------|
| **Ethernet（乙太網）** | 最常用的有線區域網路協定             | 支援 CSMA/CD 避免碰撞           |
| **PPP（點對點協定）** | 點對點連線封裝協定                   | 常用於撥號網路和 DSL 連線         |
| **MAC 位址**        | 硬體地址，唯一標識網路介面卡           | 48-bit 地址，格式如 00-1A-2B-... |
| **Wi-Fi（無線區域網路）** | 無線通訊協定                       | 支援 CSMA/CA（避免碰撞）         |

---

### 第一層：實體層（Physical Layer）

實體層負責**資料的實際傳輸**，定義電氣、機械、功能與程序規範，將資料以位元（bit）形式透過物理媒介傳送。

#### 實體層的主要功能

- **位元傳輸（Bit Transmission）**  
  將 0 和 1 轉換成電信號、光信號或無線電波，並透過物理媒介傳送。
- **傳輸媒介定義**  
  定義使用的媒介種類，例如雙絞線、同軸電纜、光纖、無線頻譜。
- **電氣與機械規範**  
  定義電壓電平、傳輸速率、接頭類型、線序等。
- **同步與時序控制**  
  控制位元傳輸的時序，確保接收端能正確判讀訊號。
- **資料率與傳輸速率**  
  規定每秒傳送多少位元（bps，bits per second）。
- **物理拓撲**  
  網路設備間的物理連接方式，例如星狀、匯流排、環狀。

#### 傳輸媒介簡介

- **雙絞線（Twisted Pair）**  
  常見有 UTP（非屏蔽雙絞線），廣泛用於乙太網路。
- **同軸電纜（Coaxial Cable）**  
  用於有線電視和部分早期網路。
- **光纖（Fiber Optic）**  
  利用光訊號傳輸，傳輸距離長、速度快且抗干擾。
- **無線電波**  
  用於 Wi-Fi、藍牙、行動通訊。


---

## OSI 模型與 TCP/IP 模型對照

| OSI 層級       | TCP/IP 對應層級         | 
|----------------|--------------------------|
| 應用層、表示層、會議層 | 應用層（Application）    |
| 傳輸層         | 傳輸層（Transport）       |
| 網路層         | 網際層（Internet）        |
| 資料鏈結層、實體層     | 網路介面層（Network Access） |

TCP/IP 只有四層。

另常聽到五層模型，將 OSI 的應用層、表示層與會議層合併為應用層。我在網路聖經上好像看到它以 Internet
protocol stack 稱呼。